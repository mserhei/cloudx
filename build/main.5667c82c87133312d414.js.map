{"version":3,"sources":["webpack:///./templates/Header/Header.hbs","webpack:///./js/history/routs.js","webpack:///./js/utils/storage.js","webpack:///./js/history/pages.js","webpack:///./js/history/mainHistory.js","webpack:///./templates/Home/Home.hbs","webpack:///./templates/Contacts/Contacts.hbs"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","lang","key","serializedState","localStorage","getItem","undefined","JSON","parse","err","console","error","load","changeLang","langFromUrl","value","stringify","setItem","save","routs","title","path","comp","homePage","header","innerHTML","Header","localHeader","root","Contacts","localContacts","document","getElementById","Home","localHome","currentPath","window","location","pathname","currentSearch","search","currentHash","hash","currentAllPath","log","currentUrlLang","URL","searchParams","get","routIdx","history","replaceState","forEach","rout","i","addEventListener","e","target","getAttribute","preventDefault","nextPath","pushState","querySelector","currentPathC","currentSearchC","currentHashC","currentAllPathC","newAllPathC","helper","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","escapeExpression","hooks","helperMissing","nullContext","stack1","alias1","program","noop"],"mappings":"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","file":"main.5667c82c87133312d414.js","sourcesContent":["var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div id=\\\"header\\\" class=\\\"header\\\">\\r\\n  <a href=\\\"/\\\">HOME</a>\\r\\n  <a href=\\\"/contacts\\\">CONTACTS</a>\\r\\n  <button class=\\\"lang-btn\\\">LANG</button>\\r\\n</div>\\r\\n\";\n},\"useData\":true});","import {load, save, remove} from '../utils/storage';\r\nimport {homePage, contactsPage} from './pages';\r\n\r\nlet lang = load('Local') || 'ru';\r\n\r\n\r\nfunction changeLang (langFromUrl) {\r\n  lang = langFromUrl;\r\n  save('Local', langFromUrl);\r\n}\r\n\r\nconst routs = [\r\n  {\r\n    title: 'Home',\r\n    path: `/?lang=${lang}`,\r\n    comp: homePage\r\n  },\r\n  {\r\n    title: 'Contacts',\r\n    path: `/contacts?lang=${lang}`,\r\n    comp: contactsPage\r\n  }\r\n]\r\n\r\nexport {routs, lang, changeLang};\r\n","// Принимает ключ `key` по которому будет произведена выборка.\r\nconst load = key => {\r\n  try {\r\n    const serializedState = localStorage.getItem(key);\r\n\r\n    return serializedState === null ? undefined : JSON.parse(serializedState);\r\n  } catch (err) {\r\n    console.error('Get state error: ', err);\r\n  }\r\n};\r\n\r\n// Принимает ключ `key` и значение `value`.\r\nconst save = (key, value) => {\r\n  try {\r\n    const serializedState = JSON.stringify(value);\r\n    localStorage.setItem(key, serializedState);\r\n  } catch (err) {\r\n    console.error('Set state error: ', err);\r\n  }\r\n};\r\n\r\n// Удаляет пару по ключу `key`.\r\nconst remove = key => {\r\n  try {\r\n    localStorage.removeItem(key);\r\n  } catch (err) {\r\n    console.error('Remove state error: ', err);\r\n  }\r\n};\r\n\r\nexport { load, save, remove };\r\n","import localHeader from '../localization/localHeader.json';\r\nimport localHome from '../localization/localHome.json';\r\nimport localContacts from '../localization/localContacts.json';\r\n\r\nimport Header from '../../templates/Header/Header.hbs'\r\nimport Home from '../../templates/Home/Home.hbs';\r\nimport Contacts from '../../templates/Contacts/Contacts.hbs';\r\n\r\nimport {lang} from './routs';\r\n\r\nconst header = document.getElementById('header');\r\nconst root = document.getElementById('root');\r\nconst footer = document.getElementById('footer');\r\n\r\nfunction homePage () {\r\n  header.innerHTML = Header(localHeader[lang]);\r\n  root.innerHTML = Home(localHome[lang]);\r\n}\r\n\r\nfunction contactsPage () {\r\n  header.innerHTML = Header(localHeader);\r\n  root.innerHTML = Contacts(localContacts);\r\n}\r\n\r\nexport {homePage, contactsPage};\r\n","import {homePage} from './pages';\r\nimport {routs} from './routs';\r\nimport {lang} from './routs';\r\nimport {changeLang} from './routs';\r\n\r\nconst header = document.getElementById('header');\r\nconst root = document.getElementById('root');\r\n\r\n\r\nconst currentPath = window.location.pathname;\r\nconst currentSearch = window.location.search;\r\nconst currentHash = window.location.hash;\r\nconst currentAllPath = currentPath + currentSearch + currentHash;\r\nconsole.log('currentPath: ', currentPath);\r\nconsole.log('currentSearch: ', currentSearch);\r\nconsole.log('currentHash: ', currentHash);\r\nconsole.log('currentAllPath:  ', currentAllPath);\r\n\r\nconst currentUrl = new URL(location);\r\nconst currentUrlLang = currentUrl.searchParams.get('lang');\r\nconsole.log('currentUrlLang:  ', currentUrlLang);\r\n\r\nif (currentUrlLang === lang) {\r\n  console.log('no need to change language')\r\n} else {\r\n  console.log('need to change language')\r\n  changeLang(currentUrlLang || 'ru');\r\n}\r\n\r\nlet routIdx = -1;\r\n\r\nif (currentPath === '/') {\r\n  routIdx = 0;\r\n  history.replaceState(null, null, `/?lang=${lang}`);\r\n  homePage();\r\n}\r\n\r\nrouts.forEach((rout, i) => {\r\n  if (rout.path === currentAllPath) {\r\n    console.log('ok path')\r\n    routIdx = i;\r\n    console.log('routIdx:  ', routIdx);\r\n    rout.comp();\r\n  }\r\n})\r\n\r\nif (routIdx === -1) {\r\n  history.replaceState(null, null, `/?lang=${lang}`);\r\n  homePage();\r\n}\r\n\r\nheader.addEventListener('click', function (e) {\r\n  if (e.target.getAttribute('href')) {\r\n    e.preventDefault();\r\n    const link = e.target.getAttribute('href');\r\n    const nextPath = `${link}?lang=${lang}`;\r\n    history.pushState(null, null, nextPath);\r\n    routs.forEach(rout => {\r\n      if (rout.path === nextPath) {\r\n        rout.comp()\r\n      }\r\n    })\r\n  }\r\n})\r\n\r\n// window.onpopstate = function(event) {\r\n//   const currentPath = window.location.pathname;\r\n//   let currentSearch = window.location.search;\r\n//   const currentHash = window.location.hash;\r\n\r\n//   console.log('currentPath: ', currentPath);\r\n//   console.log('currentSearch: ', currentSearch);\r\n//   console.log('currentHash: ', currentHash);\r\n\r\n\r\n//   currentSearch = `?lang=${lang}`\r\n//   const currentAllPath = currentPath + currentSearch + currentHash;\r\n//   console.log('currentAllPath:  ', currentAllPath);\r\n//   history.replaceState(null, null, currentAllPath);\r\n// };\r\n\r\nconst langBtn = document.querySelector('.lang-btn')\r\n\r\nfunction langBtnClick () {\r\n  console.log('langBtn clicks')\r\n  let currentPathC = window.location.pathname;\r\n  let currentSearchC = window.location.search;\r\n  let currentHashC = window.location.hash;\r\n  let currentAllPathC = currentPathC + currentSearchC + currentHashC;\r\n\r\n  let routIdx = null;\r\n  routs.forEach((rout, i) => {\r\n    if (currentAllPathC === rout.path) {\r\n      routIdx = i;\r\n    }\r\n  })\r\n  console.log(routIdx);\r\n  const nextLang = lang === 'ru' ? 'en' : 'ru';\r\n  changeLang(nextLang);\r\n\r\n  currentSearchC = `?lang=${lang}`;\r\n  const newAllPathC = currentPathC + currentSearchC + currentHashC;\r\n  history.replaceState(null, null, newAllPathC);\r\n\r\n}\r\n\r\nlangBtn.addEventListener('click', langBtnClick)\r\n\r\n","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <div>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"text\") || (depth0 != null ? lookupProperty(depth0,\"text\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"text\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":9},\"end\":{\"line\":4,\"column\":17}}}) : helper)))\n    + \"</div>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\r\\n<main class=\\\"main__home\\\">\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"with\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"hero\") : depth0),{\"name\":\"with\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":2},\"end\":{\"line\":5,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"  <p>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":5},\"end\":{\"line\":6,\"column\":14}}}) : helper)))\n    + \"</p>\\r\\n</main>\\r\\n\";\n},\"useData\":true});","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"\\r\\n<main class=\\\"main__contacts\\\">\\r\\n    <div>contacts page</div>\\r\\n</main>\\r\\n\";\n},\"useData\":true});"],"sourceRoot":""}